<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<title>MyFit Pro</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<style>
*{box-sizing:border-box}
body{margin:0;font-family:Arial;background:#f2f2f2}
header{background:#fff;padding:14px 16px;font-size:22px;font-weight:bold;box-shadow:0 2px 6px rgba(0,0,0,.1);display:flex;justify-content:space-between;align-items:center}
nav{position:fixed;bottom:0;left:0;right:0;background:#fff;display:flex;box-shadow:0 -2px 6px rgba(0,0,0,.1)}
nav button{flex:1;border:none;background:#fff;padding:10px;font-size:12px}
.page{display:none;padding:16px 16px 70px}
.page.active{display:block}
.card{background:#fff;padding:12px;margin-bottom:12px;border-radius:12px;box-shadow:0 2px 6px rgba(0,0,0,.08)}
h3{margin:6px 0}
iframe{width:100%;height:200px;border-radius:10px;border:0}
input{width:100%;padding:10px;border-radius:8px;border:1px solid #ddd;margin-top:6px}
.btn{width:100%;padding:10px;border-radius:10px;border:none;background:#2ecc71;color:#fff;font-size:15px;margin-top:8px}
.btn.blue{background:#3498db}
.row{display:flex;gap:8px}
.small{font-size:12px;color:#777}
.check{display:flex;align-items:center;gap:8px;margin-top:6px}
.progress{height:8px;background:#eee;border-radius:8px;overflow:hidden}
.progress>div{height:100%;background:#2ecc71;width:0%}
</style>
</head>
<body>

<header>
  <span>MyFit Pro</span>
  <span id="today" class="small"></span>
</header>

<!-- HOME -->
<div id="home" class="page active">
  <div class="card">
    <h3>üìã Meu Treino</h3>
    <div id="treinoList"></div>
    <button class="btn blue" onclick="saveWorkout()">Salvar treino de hoje</button>
  </div>

  <div class="card">
    <h3>‚è± Cron√¥metro</h3>
    <h1 id="timer">00:00</h1>
    <div class="row">
      <button class="btn" onclick="startTimer()">Iniciar</button>
      <button class="btn blue" onclick="stopTimer()">Parar</button>
    </div>
  </div>
</div>

<!-- BIBLIOTECA -->
<div id="library" class="page">
  <h3>üìö Biblioteca de Exerc√≠cios</h3>
  <div id="lib"></div>
</div>

<!-- HIST√ìRICO -->
<div id="history" class="page">
  <h3>üìà Hist√≥rico</h3>
  <div id="hist"></div>
</div>

<!-- PROGRESSO -->
<div id="progress" class="page">
  <h3>üìä Evolu√ß√£o</h3>
  <div id="prog"></div>
</div>

<nav>
  <button onclick="go('home')">Treino</button>
  <button onclick="go('library')">Biblioteca</button>
  <button onclick="go('history')">Hist√≥rico</button>
  <button onclick="go('progress')">Progresso</button>
</nav>

<script>
document.getElementById("today").innerText = new Date().toLocaleDateString();

const EXERCISES = [
  {cat:"Peito", name:"Supino Reto", yt:"4Y2ZdHCOXok"},
  {cat:"Peito", name:"Supino Inclinado", yt:"SrqOu55lrYU"},
  {cat:"Costas", name:"Puxada Frontal", yt:"CAwf7n6Luuc"},
  {cat:"Costas", name:"Remada Curvada", yt:"vT2GjY_Umpw"},
  {cat:"Pernas", name:"Agachamento Livre", yt:"Dy28eq2PjcM"},
  {cat:"Pernas", name:"Leg Press", yt:"IZxyjW7MPJQ"},
  {cat:"Ombros", name:"Desenvolvimento", yt:"qEwKCR5JCog"},
  {cat:"Ombros", name:"Eleva√ß√£o Lateral", yt:"3VcKaXpzqRo"},
  {cat:"Bra√ßos", name:"Rosca Direta", yt:"kwG2ipFRgfo"},
  {cat:"Bra√ßos", name:"Tr√≠ceps Pulley", yt:"2-LAMcpzODU"},
  {cat:"Core", name:"Abdominal Crunch", yt:"Xyd_fa5zoEU"}
];

let treino = JSON.parse(localStorage.getItem("treino")||"[]");
let historico = JSON.parse(localStorage.getItem("hist")||"[]");

function go(p){
  document.querySelectorAll(".page").forEach(x=>x.classList.remove("active"));
  document.getElementById(p).classList.add("active");
  if(p==="home") renderTreino();
  if(p==="library") renderLib();
  if(p==="history") renderHist();
  if(p==="progress") renderProg();
}

function renderLib(){
  lib.innerHTML="";
  let last="";
  EXERCISES.forEach(e=>{
    if(e.cat!==last){
      lib.innerHTML+=`<h4>${e.cat}</h4>`;
      last=e.cat;
    }
    lib.innerHTML+=`
      <div class="card">
        <h3>${e.name}</h3>
        <iframe src="https://www.youtube.com/embed/${e.yt}" allowfullscreen></iframe>
        <button class="btn" onclick="addExercise('${e.name}','${e.yt}')">Adicionar ao treino</button>
      </div>`;
  });
}

function addExercise(name,yt){
  treino.push({name,yt,peso:"",done:false});
  localStorage.setItem("treino",JSON.stringify(treino));
  alert(name+" adicionado!");
}

function renderTreino(){
  treinoList.innerHTML="";
  treino.forEach((e,i)=>{
    treinoList.innerHTML+=`
      <div class="card">
        <h3>${e.name}</h3>
        <iframe src="https://www.youtube.com/embed/${e.yt}" allowfullscreen></iframe>
        <input placeholder="Peso (kg)" value="${e.peso}" oninput="treino[${i}].peso=this.value;saveTreino()">
        <div class="check">
          <input type="checkbox" ${e.done?"checked":""} onchange="treino[${i}].done=this.checked;saveTreino()">
          <span>Conclu√≠do</span>
        </div>
      </div>`;
  });
}

function saveTreino(){ localStorage.setItem("treino",JSON.stringify(treino)); }

function saveWorkout(){
  if(!treino.length) return alert("Adicione exerc√≠cios!");
  historico.push({date:new Date().toLocaleDateString(),data:JSON.parse(JSON.stringify(treino))});
  localStorage.setItem("hist",JSON.stringify(historico));
  alert("Treino salvo!");
}

function renderHist(){
  hist.innerHTML="";
  historico.forEach(d=>{
    hist.innerHTML+=`<div class="card"><b>${d.date}</b><br>`+
      d.data.map(x=>`${x.name}: ${x.peso||"-"}kg`).join("<br>")+
      `</div>`;
  });
}

function renderProg(){
  prog.innerHTML="";
  let map={};
  historico.forEach(h=>{
    h.data.forEach(e=>{
      if(!map[e.name]) map[e.name]=[];
      if(e.peso) map[e.name].push(parseFloat(e.peso)||0);
    });
  });
  Object.keys(map).forEach(k=>{
    let arr=map[k];
    if(arr.length<2) return;
    let p=((arr[arr.length-1]-arr[0])/(arr[0]||1))*100;
    prog.innerHTML+=`
      <div class="card">
        <b>${k}</b> <span class="small">${p.toFixed(1)}%</span>
        <div class="progress"><div style="width:${Math.min(Math.max(p,0),100)}%"></div></div>
      </div>`;
  });
}

/* Timer */
let t=0,ti=null;
function startTimer(){
  if(ti) return;
  ti=setInterval(()=>{t++;timer.innerText=(String(Math.floor(t/60)).padStart(2,"0")+":"+String(t%60).padStart(2,"0"));},1000);
}
function stopTimer(){clearInterval(ti);ti=null;}
</script>
</body>
</html>
