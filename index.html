<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>MyFit Pro</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
*{box-sizing:border-box}
body{margin:0;font-family:Arial;background:#f2f2f2}
header{background:#fff;padding:14px;font-size:22px;font-weight:bold;text-align:center;box-shadow:0 2px 6px rgba(0,0,0,.1)}
nav{position:fixed;bottom:0;left:0;right:0;background:#fff;display:flex;box-shadow:0 -2px 6px rgba(0,0,0,.1)}
nav button{flex:1;border:none;background:#fff;padding:10px}
.page{display:none;padding:15px 15px 70px}
.page.active{display:block}
.card{background:#fff;padding:12px;margin-bottom:12px;border-radius:12px;box-shadow:0 2px 6px rgba(0,0,0,.08)}
iframe{width:100%;height:200px;border-radius:10px;border:0}
button{width:100%;padding:10px;border-radius:10px;border:none;background:#2ecc71;color:#fff;margin-top:6px}
input{width:100%;padding:8px;margin-top:6px;border-radius:8px;border:1px solid #ccc}
h3{margin:6px 0}
.small{font-size:12px;color:#777}
</style>
</head>

<body>

<header>MyFit Pro</header>

<div id="home" class="page active">
  <div class="card"><button onclick="go('library')">ðŸ“š Biblioteca</button></div>
  <div class="card"><button onclick="go('treino')">ðŸ“‹ Meu Treino</button></div>
  <div class="card"><button onclick="go('history')">ðŸ“ˆ HistÃ³rico</button></div>
</div>

<div id="library" class="page">
  <h2>Biblioteca</h2>
  <div id="lib"></div>
</div>

<div id="treino" class="page">
  <h2>Meu Treino</h2>
  <div id="treinos"></div>
  <button onclick="save()">Salvar treino</button>
</div>

<div id="history" class="page">
  <h2>HistÃ³rico</h2>
  <div id="hist"></div>
</div>

<nav>
  <button onclick="go('home')">InÃ­cio</button>
  <button onclick="go('library')">Biblioteca</button>
  <button onclick="go('treino')">Treino</button>
  <button onclick="go('history')">HistÃ³rico</button>
</nav>

<script>
let treino = JSON.parse(localStorage.getItem("treino"))||[];
let histData = JSON.parse(localStorage.getItem("hist"))||[];

function go(p){
  document.querySelectorAll('.page').forEach(x=>x.classList.remove('active'));
  document.getElementById(p).classList.add('active');
  if(p=="library") loadLib();
  if(p=="treino") renderTreino();
  if(p=="history") renderHist();
}

async function loadLib(){
  const res = await fetch("exercises.json");
  const data = await res.json();
  lib.innerHTML="";
  let last="";
  data.forEach(e=>{
    if(e.cat!==last){
      lib.innerHTML+=`<h3>${e.cat}</h3>`;
      last=e.cat;
    }
    lib.innerHTML+=`
      <div class="card">
        <b>${e.name}</b>
        <iframe src="https://www.youtube.com/embed/${e.yt}" allowfullscreen></iframe>
        <button onclick="add('${e.name}','${e.yt}')">Adicionar</button>
      </div>`;
  });
}

function add(name,yt){
  treino.push({name,yt,peso:""});
  localStorage.setItem("treino",JSON.stringify(treino));
  alert("Adicionado!");
}

function renderTreino(){
  treinos.innerHTML="";
  treino.forEach((e,i)=>{
    treinos.innerHTML+=`
      <div class="card">
        <b>${e.name}</b>
        <iframe src="https://www.youtube.com/embed/${e.yt}" allowfullscreen></iframe>
        <input placeholder="Peso" value="${e.peso}" oninput="treino[${i}].peso=this.value;localStorage.setItem('treino',JSON.stringify(treino))">
      </div>`;
  });
}

function save(){
  histData.push({data:new Date().toLocaleDateString(), treino:[...treino]});
  localStorage.setItem("hist",JSON.stringify(histData));
  alert("Treino salvo!");
}

function renderHist(){
  hist.innerHTML="";
  histData.forEach(d=>{
    hist.innerHTML+=`<div class="card"><b>${d.data}</b><br>`+
      d.treino.map(x=>`${x.name}: ${x.peso||"-"}kg`).join("<br>")+"</div>";
  });
}
</script>

</body>
</html>
